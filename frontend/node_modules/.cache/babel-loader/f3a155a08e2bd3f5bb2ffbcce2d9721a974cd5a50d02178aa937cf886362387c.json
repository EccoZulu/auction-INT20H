{"ast":null,"code":"import axios from \"axios\";\nimport { bidListFail, bidListRequest, bidListSuccess, bidPaidFail, bidPaidRequest, bidPaidSuccess, bidPlaceFail, bidPlaceRequest, bidPlaceSuccess, bidProductFail, bidProductRequest, bidProductSuccess } from \"../reducers/bidReducers\";\nconst baseURL = process.env.REACT_APP_BASE_API_URL || 'http://127.0.0.1:8000';\nconst createAPIinstance = () => {\n  return axios.create({\n    baseURL: `${baseURL}/api/users/bids`,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    withCredentials: true\n  });\n};\nexport const listBids = () => async dispatch => {\n  try {\n    dispatch(bidListRequest());\n    const api = createAPIinstance();\n    const {\n      data\n    } = await api.get('/?ordering=createdAt');\n    dispatch(bidListSuccess(data));\n  } catch (error) {\n    dispatch(bidListFail(error.response && error.response.data.detail ? error.response.data.detail : error.message));\n  }\n};\nexport const placeBid = bid => async dispatch => {\n  try {\n    dispatch(bidPlaceRequest());\n    const api = createAPIinstance();\n    const {\n      data\n    } = await api.post('/', bid);\n    dispatch(bidPlaceSuccess(data));\n  } catch (error) {\n    // More robust error handling\n    let errorMessage = \"An unexpected error occurred\";\n    if (error.response) {\n      var _error$response$data$;\n      // Check if the detailed error message is available\n      errorMessage = error.response.data.detail || ((_error$response$data$ = error.response.data.bid) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.detail) || \"Error placing bid\";\n    } else if (error.request) {\n      // The request was made but no response was received\n      errorMessage = \"No response from server\";\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      errorMessage = error.message;\n    }\n    dispatch(bidPlaceFail(errorMessage));\n  }\n};\nexport const calculateBidPaid = bid => async dispatch => {\n  try {\n    dispatch(bidPaidRequest());\n    const api = createAPIinstance();\n    const {\n      data\n    } = await api.post('/calculate-payment/', bid);\n    dispatch(bidPaidSuccess(data));\n  } catch (error) {\n    dispatch(bidPaidFail(error.response && error.response.data.detail ? error.response.data.detail : error.message));\n  }\n};\nexport const productBids = productID => async dispatch => {\n  try {\n    dispatch(bidProductRequest());\n    const api = createAPIinstance();\n    const {\n      data\n    } = await api.get(`/product/${productID}`);\n    dispatch(bidProductSuccess(data));\n  } catch (error) {\n    dispatch(bidProductFail(error.response && error.response.data.detail ? error.response.data.detail : error.message));\n  }\n};","map":{"version":3,"names":["axios","bidListFail","bidListRequest","bidListSuccess","bidPaidFail","bidPaidRequest","bidPaidSuccess","bidPlaceFail","bidPlaceRequest","bidPlaceSuccess","bidProductFail","bidProductRequest","bidProductSuccess","baseURL","process","env","REACT_APP_BASE_API_URL","createAPIinstance","create","headers","withCredentials","listBids","dispatch","api","data","get","error","response","detail","message","placeBid","bid","post","errorMessage","_error$response$data$","request","calculateBidPaid","productBids","productID"],"sources":["F:/e-Auction/frontend/src/actions/bidActions.js"],"sourcesContent":["import axios from \"axios\"\r\nimport { bidListFail, bidListRequest, bidListSuccess, bidPaidFail, bidPaidRequest, bidPaidSuccess, bidPlaceFail, bidPlaceRequest, bidPlaceSuccess, bidProductFail, bidProductRequest, bidProductSuccess } from \"../reducers/bidReducers\"\r\nconst baseURL = process.env.REACT_APP_BASE_API_URL || 'http://127.0.0.1:8000';\r\nconst createAPIinstance = () => {\r\n\r\n    return axios.create({\r\n        baseURL: `${baseURL}/api/users/bids`,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        withCredentials: true\r\n    })\r\n\r\n}\r\n\r\nexport const listBids = () => async (dispatch) => {\r\n    try{\r\n        dispatch(bidListRequest())\r\n\r\n        const api = createAPIinstance()\r\n        const { data } = await api.get('/?ordering=createdAt')\r\n\r\n        dispatch(bidListSuccess(data))\r\n    }catch(error){\r\n        dispatch(bidListFail(\r\n            error.response && error.response.data.detail ?\r\n            error.response.data.detail :\r\n            error.message\r\n        ))\r\n    }\r\n}\r\n\r\nexport const placeBid = (bid) => async (dispatch) => {\r\n    try {\r\n        dispatch(bidPlaceRequest());\r\n\r\n        const api = createAPIinstance();\r\n        const { data } = await api.post('/', bid);\r\n\r\n        dispatch(bidPlaceSuccess(data));\r\n    } catch (error) {\r\n        // More robust error handling\r\n        let errorMessage = \"An unexpected error occurred\";\r\n        if (error.response) {\r\n            // Check if the detailed error message is available\r\n            errorMessage = error.response.data.detail || error.response.data.bid?.detail || \"Error placing bid\";\r\n        } else if (error.request) {\r\n            // The request was made but no response was received\r\n            errorMessage = \"No response from server\";\r\n        } else {\r\n            // Something happened in setting up the request that triggered an Error\r\n            errorMessage = error.message;\r\n        }\r\n        dispatch(bidPlaceFail(errorMessage));\r\n    }\r\n}\r\n\r\nexport const calculateBidPaid = (bid) => async (dispatch) => {\r\n    try{\r\n        dispatch(bidPaidRequest())\r\n\r\n        const api = createAPIinstance()\r\n        const { data } = await api.post('/calculate-payment/', bid)\r\n\r\n        dispatch(bidPaidSuccess(data))\r\n    }catch(error){\r\n        dispatch(bidPaidFail(\r\n            error.response && error.response.data.detail ?\r\n            error.response.data.detail :\r\n            error.message\r\n        ))\r\n    }\r\n}\r\n\r\nexport const productBids = (productID) => async (dispatch) => {\r\n    try{\r\n        dispatch(bidProductRequest())\r\n        \r\n        const api = createAPIinstance()\r\n        const { data } = await api.get(`/product/${productID}`)\r\n        \r\n        dispatch(bidProductSuccess(data))\r\n    }catch(error){\r\n        dispatch(bidProductFail(\r\n            error.response && error.response.data.detail ?\r\n            error.response.data.detail :\r\n            error.message\r\n        ))\r\n    }\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,cAAc,EAAEC,cAAc,EAAEC,WAAW,EAAEC,cAAc,EAAEC,cAAc,EAAEC,YAAY,EAAEC,eAAe,EAAEC,eAAe,EAAEC,cAAc,EAAEC,iBAAiB,EAAEC,iBAAiB,QAAQ,yBAAyB;AACxO,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAI,uBAAuB;AAC7E,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAE5B,OAAOjB,KAAK,CAACkB,MAAM,CAAC;IAChBL,OAAO,EAAG,GAAEA,OAAQ,iBAAgB;IACpCM,OAAO,EAAE;MACL,cAAc,EAAE;IACpB,CAAC;IACDC,eAAe,EAAE;EACrB,CAAC,CAAC;AAEN,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAGA,CAAA,KAAM,MAAOC,QAAQ,IAAK;EAC9C,IAAG;IACCA,QAAQ,CAACpB,cAAc,CAAC,CAAC,CAAC;IAE1B,MAAMqB,GAAG,GAAGN,iBAAiB,CAAC,CAAC;IAC/B,MAAM;MAAEO;IAAK,CAAC,GAAG,MAAMD,GAAG,CAACE,GAAG,CAAC,sBAAsB,CAAC;IAEtDH,QAAQ,CAACnB,cAAc,CAACqB,IAAI,CAAC,CAAC;EAClC,CAAC,QAAME,KAAK,EAAC;IACTJ,QAAQ,CAACrB,WAAW,CAChByB,KAAK,CAACC,QAAQ,IAAID,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,MAAM,GAC5CF,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,MAAM,GAC1BF,KAAK,CAACG,OACV,CAAC,CAAC;EACN;AACJ,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAIC,GAAG,IAAK,MAAOT,QAAQ,IAAK;EACjD,IAAI;IACAA,QAAQ,CAACd,eAAe,CAAC,CAAC,CAAC;IAE3B,MAAMe,GAAG,GAAGN,iBAAiB,CAAC,CAAC;IAC/B,MAAM;MAAEO;IAAK,CAAC,GAAG,MAAMD,GAAG,CAACS,IAAI,CAAC,GAAG,EAAED,GAAG,CAAC;IAEzCT,QAAQ,CAACb,eAAe,CAACe,IAAI,CAAC,CAAC;EACnC,CAAC,CAAC,OAAOE,KAAK,EAAE;IACZ;IACA,IAAIO,YAAY,GAAG,8BAA8B;IACjD,IAAIP,KAAK,CAACC,QAAQ,EAAE;MAAA,IAAAO,qBAAA;MAChB;MACAD,YAAY,GAAGP,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,MAAM,MAAAM,qBAAA,GAAIR,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACO,GAAG,cAAAG,qBAAA,uBAAvBA,qBAAA,CAAyBN,MAAM,KAAI,mBAAmB;IACvG,CAAC,MAAM,IAAIF,KAAK,CAACS,OAAO,EAAE;MACtB;MACAF,YAAY,GAAG,yBAAyB;IAC5C,CAAC,MAAM;MACH;MACAA,YAAY,GAAGP,KAAK,CAACG,OAAO;IAChC;IACAP,QAAQ,CAACf,YAAY,CAAC0B,YAAY,CAAC,CAAC;EACxC;AACJ,CAAC;AAED,OAAO,MAAMG,gBAAgB,GAAIL,GAAG,IAAK,MAAOT,QAAQ,IAAK;EACzD,IAAG;IACCA,QAAQ,CAACjB,cAAc,CAAC,CAAC,CAAC;IAE1B,MAAMkB,GAAG,GAAGN,iBAAiB,CAAC,CAAC;IAC/B,MAAM;MAAEO;IAAK,CAAC,GAAG,MAAMD,GAAG,CAACS,IAAI,CAAC,qBAAqB,EAAED,GAAG,CAAC;IAE3DT,QAAQ,CAAChB,cAAc,CAACkB,IAAI,CAAC,CAAC;EAClC,CAAC,QAAME,KAAK,EAAC;IACTJ,QAAQ,CAAClB,WAAW,CAChBsB,KAAK,CAACC,QAAQ,IAAID,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,MAAM,GAC5CF,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,MAAM,GAC1BF,KAAK,CAACG,OACV,CAAC,CAAC;EACN;AACJ,CAAC;AAED,OAAO,MAAMQ,WAAW,GAAIC,SAAS,IAAK,MAAOhB,QAAQ,IAAK;EAC1D,IAAG;IACCA,QAAQ,CAACX,iBAAiB,CAAC,CAAC,CAAC;IAE7B,MAAMY,GAAG,GAAGN,iBAAiB,CAAC,CAAC;IAC/B,MAAM;MAAEO;IAAK,CAAC,GAAG,MAAMD,GAAG,CAACE,GAAG,CAAE,YAAWa,SAAU,EAAC,CAAC;IAEvDhB,QAAQ,CAACV,iBAAiB,CAACY,IAAI,CAAC,CAAC;EACrC,CAAC,QAAME,KAAK,EAAC;IACTJ,QAAQ,CAACZ,cAAc,CACnBgB,KAAK,CAACC,QAAQ,IAAID,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,MAAM,GAC5CF,KAAK,CAACC,QAAQ,CAACH,IAAI,CAACI,MAAM,GAC1BF,KAAK,CAACG,OACV,CAAC,CAAC;EACN;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}